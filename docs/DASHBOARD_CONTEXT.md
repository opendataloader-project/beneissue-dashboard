# Beneissue 메트릭 대시보드

## 개요

AI 이슈 자동화 성능을 측정하고 시각화하는 웹 대시보드

**목적:**

- 투자자/파트너에게 AI 자동화 성과 증명
- 팩트 기반 지표로 신뢰성 확보
- 내부 성능 모니터링

---

## 아키텍처

```
[GitHub Actions]
       │
       ▼
[beneissue Python] ──POST──▶ [Supabase PostgreSQL]
                                      │
                              ◀──SELECT──
                                      │
                              [Next.js + Vercel]
                              (API Routes = 비즈니스 로직)
                                      │
                                      ▼
                        beneissue.opendataloader.org
```

**핵심 설계:**

- Python → Supabase 직접 쓰기 (service_key)
- Next.js → Supabase 읽기 전용 (anon_key)
- 별도 백엔드 서버 불필요 (서버리스)

---

## 기술 스택

| 항목       | 선택                              |
| ---------- | --------------------------------- |
| 프론트엔드 | Next.js 16 + shadcn/ui + Recharts |
| 상태관리   | Jotai                             |
| DB         | Supabase PostgreSQL               |
| 호스팅     | Vercel (무료)                     |
| 스타일링   | Tailwind CSS v4                   |
| i18n       | 커스텀 훅 (ko/en)                 |

---

## 대시보드 페이지

| 경로         | 용도                                                                | 상태      |
| ------------ | ------------------------------------------------------------------- | --------- |
| `/`          | Public Stats - 히어로 섹션 + 핵심 지표 4개 + 월별 추이 차트         | 구현 완료 |
| `/dashboard` | 통합 대시보드 - KPI 카드 + 일별 추이 + 결과 분포 + 단계별 처리 시간 | 구현 완료 |

---

## 컴포넌트 구조

```
src/
├── app/
│   ├── page.tsx              # Public Stats (/)
│   ├── dashboard/page.tsx    # 통합 대시보드
│   └── ops/page.tsx          # → /dashboard 리다이렉트
├── components/
│   ├── charts/
│   │   ├── trend-line-chart.tsx      # 월별 추이 (Public)
│   │   ├── daily-trend-chart.tsx     # 일별 추이 (Dashboard)
│   │   ├── decision-distribution.tsx # 처리 결과 분포
│   │   ├── distribution-pie.tsx      # 파이 차트
│   │   └── cost-savings-chart.tsx    # 비용 절감 차트
│   ├── stats/
│   │   ├── stat-card.tsx    # Public 지표 카드
│   │   └── kpi-card.tsx     # Dashboard KPI 카드 (delta 포함)
│   ├── layout/
│   │   ├── header.tsx       # 헤더 (로고, 네비게이션, 언어 전환)
│   │   ├── footer.tsx       # 푸터
│   │   ├── root-layout.tsx  # 루트 레이아웃
│   │   └── dashboard-layout.tsx  # 대시보드 레이아웃
│   ├── empty-state.tsx      # 데이터 없음 상태
│   └── period-filter.tsx    # 기간 필터 셀렉트
└── hooks/
    ├── useMetrics.ts        # 메트릭 데이터 훅
    └── useTranslation.ts    # i18n 훅
```

---

## 메트릭 정의 (팩트 기반)

### 핵심 지표 (100% 실측)

| 지표           | 계산                                  | 설명                  |
| -------------- | ------------------------------------- | --------------------- |
| 총 처리량      | `count(*)`                            | 처리된 이슈 수        |
| 자동 해결율    | `auto_resolved / total × 100`         | 인간 개입 없이 종료 % |
| 평균 응답 시간 | `avg(first_response - issue_created)` | 첫 응답까지 시간      |
| 총 AI 비용     | `sum(cost_usd)`                       | 실제 API 비용         |
| 건당 AI 비용   | `sum(cost_usd) / count(*)`            | 이슈당 평균 비용      |

### 자동 해결 케이스

인간 개입 없이 종료 가능한 케이스:

- `triage/invalid` - 유효하지 않은 이슈
- `triage/duplicate` - 중복 이슈
- `triage/needs-info` - 정보 요청 후 대기
- `fix/completed` - PR 자동 생성 완료
- `fix/comment-only` - 코멘트로 해결 (코드 변경 불필요)

---

## 와이어프레임

### Public Stats (/)

```
┌─────────────────────────────────────────────────────────────┐
│  [Header: Logo | Dashboard | Ops | Lang]                    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│              ● Live Metrics                                 │
│                                                             │
│           AI Issue Automation                               │
│           Performance at a Glance                           │
│                                                             │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐       │
│  │  1,247   │ │   32%    │ │   45초   │ │  $15.80  │       │
│  │ 총 처리량 │ │ 자동해결율│ │ 평균응답  │ │  AI비용  │       │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘       │
│                                                             │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ Monthly Trend (Line Chart)                              ││
│  └─────────────────────────────────────────────────────────┘│
│                                                             │
│  ┌───────────────┐ ┌───────────────┐ ┌───────────────┐     │
│  │ 자동 분류      │ │ 깊이 분석     │ │ 자동 수정     │     │
│  │ 5min/이슈     │ │ 30min/이슈    │ │ 2hr/이슈     │     │
│  └───────────────┘ └───────────────┘ └───────────────┘     │
│                                                             │
│  [Footer]                                                   │
└─────────────────────────────────────────────────────────────┘
```

### Dashboard (/dashboard)

```
┌─────────────────────────────────────────────────────────────┐
│  [Header]                                                   │
├─────────────────────────────────────────────────────────────┤
│  Executive Dashboard                     [이번 달 ▾]        │
│  팩트 기반 AI 성능 지표                                      │
├─────────────────────────────────────────────────────────────┤
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌────────────────┐ │
│  │  1,247   │ │   32%    │ │   45초   │ │  $15.80        │ │
│  │ 총 처리량 │ │ 자동해결율│ │ 평균응답  │ │ 총 AI비용      │ │
│  │ ▲+31%   │ │ ▲+5%    │ │ ▼-12%   │ │ (건당 $0.013)  │ │
│  └──────────┘ └──────────┘ └──────────┘ └────────────────┘ │
│                                                             │
│  ┌─────────────────────────┐ ┌───────────────────────────┐ │
│  │ Daily Trend             │ │ Decision Distribution     │ │
│  │ [Area Chart]            │ │ [Pie Chart]               │ │
│  └─────────────────────────┘ └───────────────────────────┘ │
│                                                             │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ ⚡ 단계별 처리 시간                                       ││
│  │ ┌─────────┐ ┌─────────┐ ┌─────────┐                    ││
│  │ │ Triage  │ │ Analyze │ │  Fix    │                    ││
│  │ │  12초   │ │  45초   │ │ 3분20초  │                    ││
│  │ └─────────┘ └─────────┘ └─────────┘                    ││
│  └─────────────────────────────────────────────────────────┘│
│                                                             │
│  [Footer]                                                   │
└─────────────────────────────────────────────────────────────┘
```
